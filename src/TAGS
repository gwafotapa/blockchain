
network.rs,696
pub struct Network {Network16,356
impl Network {Network22,492
    pub fn with_capacity(n: usize) -> Network {with_capacity23,507
    pub fn add(&mut self, node: Node) {add31,717
    pub fn random(nodes: usize) -> Network {random36,851
    pub fn run(&mut self) {run59,1689
    pub fn broadcast(&self, message: Message) {broadcast66,1893
fn random_graph(vertices: usize) -> Graph {random_graph74,2103
impl Drop for Network {Network113,3285
    fn drop(&mut self) {drop114,3309
impl fmt::Debug for Network {Network125,3582
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {fmt126,3612
mod test {test137,3955
    fn test_random_graph() {test_random_graph141,3997

node.rs,1823
// const PROBABILITY_NEW_BLOCK: f64 = 1.0 / 1000000.0;PROBABILITY_NEW_BLOCK19,439
// const PROBABILITY_NEW_TRANSACTION: f64 = 1.0 / 1000000.0;PROBABILITY_NEW_TRANSACTION20,494
// const SEND: usize = 1 << 2;SEND21,555
pub struct Node {Node23,587
impl PartialEq for Node {Node35,910
    fn eq(&self, other: &Node) -> bool {eq36,936
impl Eq for Node {}Node41,1014
impl Hash for Node {Node43,1035
    fn hash<H: Hasher>(&self, state: &mut H) {hash44,1056
impl Node {Node49,1141
    pub fn new(new50,1153
    pub fn run(&mut self) {run72,1782
    pub fn id(&self) -> usize {id124,4242
    pub fn sender(&self) -> &Sender<Arc<Vec<u8>>> {sender128,4297
    pub fn listener(&self) -> &Receiver<Arc<Vec<u8>>> {listener132,4377
    pub fn neighbours(&self) -> &[(usize, Sender<Arc<Vec<u8>>>)] {neighbours136,4463
    pub fn utxo_pool(&self) -> &UtxoPool {utxo_pool140,4570
    pub fn utxo_pool_mut(&mut self) -> &mut UtxoPool {utxo_pool_mut144,4644
    pub fn transaction_pool(&self) -> &TransactionPool {transaction_pool148,4734
    pub fn transaction_pool_mut(&mut self) -> &mut TransactionPool {transaction_pool_mut152,4829
    pub fn wallet(&self) -> &Wallet {wallet156,4940
    pub fn wallet_mut(&mut self) -> &mut Wallet {wallet_mut160,5006
    // pub fn blockchain(&self) -> &Blockchain {blockchain164,5088
    // pub fn update_transaction_pool(&mut self) -> Option<&[Transaction]> {update_transaction_pool169,5217
    //     // pub fn update_transaction_pool(&mut self) -> Option<Vec<u8>> {update_transaction_pool170,5294
    // pub fn propagate<B>(&self, bytes: B)propagate191,6164
    pub fn propagate(&self, message: Message) {propagate201,6423
    // pub fn mine(&mut self) -> Option<Block> {mine214,6935
    // pub fn synchronize(&mut self) {synchronize234,7810

wallet.rs,362
pub struct Wallet {Wallet8,163
impl Wallet {Wallet13,223
    pub fn new(id: usize, utxos: Vec<Utxo>) -> Self {new14,237
    pub fn add(&mut self, utxo: Utxo) {add18,325
    pub fn manage(&mut self) -> Option<Transaction> {manage25,488
    pub fn process(&mut self, transaction: &Transaction) -> result::Result<(), InvalidTransaction> {process59,1704

main.rs,24
fn main() {main13,270

chain.rs,563
pub struct Blockchain {Blockchain3,54
impl Blockchain {Blockchain8,136
    pub fn new() -> Self {new9,154
    pub fn push(&mut self, block: Block) {push16,287
    pub fn len(&self) -> usize {len21,402
    pub fn last(&self) -> &Block {last25,467
    pub fn mined_block(&self) -> Option<&Block> {mined_block29,544
    pub fn has_mined_block(&self) -> bool {has_mined_block33,635
    pub fn take_mined_block(&mut self) -> Block {take_mined_block37,721
    pub fn set_mined_block(&mut self, transactions: Vec<Transaction>) {set_mined_block41,819

common.rs,402
pub const NODES: usize = 4;NODES9,178
pub const PROBABILITY_SPEND: f64 = 1.0 / 1000000.0;PROBABILITY_SPEND10,206
const SHUT_DOWN: &[u8] = b"Shut down";SHUT_DOWN11,258
pub enum Message<'a> {Message13,298
impl<'a, T> From<T> for Message<'a>Message19,398
    fn from(bytes: T) -> Self {from23,462
impl<'a> Message<'a> {Message35,792
    pub fn serialize(&self) -> Vec<u8> {serialize36,815

transaction/pool.rs,996
// const PROBABILITY_NEW_TRANSACTION: f64 = 1.0 / 1000000.0;PROBABILITY_NEW_TRANSACTION3,38
// const SEND: usize = 1 << 2;SEND4,99
pub struct TransactionPool {TransactionPool6,131
impl TransactionPool {TransactionPool11,225
    pub fn new() -> Self {new12,248
    // pub fn update(&mut self, utxo_pool: &UtxoPool) -> Option<Vec<u8>> {update19,375
    pub fn transactions(&self) -> &[Transaction] {transactions37,1045
    // pub fn propagated(&self) -> usize {propagated41,1130
    pub fn size(&self) -> usize {size45,1210
    // pub fn set_propagated(&mut self, propagated: usize) {set_propagated49,1283
    pub fn add(&mut self, transaction: Transaction) {add53,1395
    pub fn contains(&self, transaction: &Transaction) -> bool {contains57,1501
    // pub fn next_batch(&self) -> Option<&[Transaction]> {next_batch61,1620
    // pub fn has_next_batch(&self) -> bool {has_next_batch69,1867
    // pub fn remove(&mut self, records: &Vec<Transaction>) {remove75,2069

transaction/mod.rs,1187
const SIZE_BYTES: usize = 12;SIZE_BYTES14,264
pub struct InvalidTransaction;InvalidTransaction17,319
impl fmt::Display for InvalidTransaction {InvalidTransaction19,351
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {fmt20,394
impl Error for InvalidTransaction {InvalidTransaction25,503
    fn source(&self) -> Option<&(dyn Error + 'static)> {source26,539
pub struct Transaction {Transaction32,657
impl Transaction {Transaction37,726
    pub fn new(input: Utxo, outputs: Vec<Utxo>) -> Self {new38,745
    pub fn input(&self) -> Utxo {input42,842
    pub fn outputs(&self) -> &[Utxo] {outputs46,902
    pub fn serialize(&self) -> Vec<u8> {serialize50,970
    pub fn deserialize<B>(bytes: B) -> Selfdeserialize58,1178
    pub fn hash(&self) -> Hash {hash65,1311
    pub fn hash_merkle_root(transactions: &Vec<Self>) -> Hash {hash_merkle_root71,1455
impl From<&[u8]> for Transaction {Transaction78,1703
    fn from(bytes: &[u8]) -> Self {from79,1738
impl fmt::Display for Transaction {Transaction89,2010
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {fmt90,2046
pub mod merkle_tree;merkle_tree112,2658
pub mod pool;pool113,2679

transaction/merkle_tree.rs,163
pub struct MergeHash {}MergeHash6,91
impl Merge for MergeHash {MergeHash8,116
    fn merge(left: &Self::Item, right: &Self::Item) -> Self::Item {merge11,166

lib.rs,235
// pub mod block;block3,33
// pub mod chain;chain4,51
pub mod common;common5,69
pub mod network;network6,85
pub mod node;node7,102
pub mod transaction;transaction8,116
pub mod utxo;utxo9,137
pub mod wallet;wallet10,151

utxo.rs,1286
const INIT_AMOUNT: u32 = 10;INIT_AMOUNT9,189
pub struct Utxo {Utxo13,358
// impl PartialEq for Utxo {Utxo18,491
//     fn eq(&self, other: &Self) -> bool {eq19,520
impl From<&[u8]> for Utxo {Utxo24,618
    fn from(bytes: &[u8]) -> Self {from25,646
impl Utxo {Utxo32,874
    pub fn new(amount: u32, puzzle: usize) -> Self {new33,886
    pub fn amount(&self) -> u32 {amount37,978
    pub fn puzzle(&self) -> usize {puzzle41,1039
    pub fn serialize(&self) -> Vec<u8> {serialize45,1102
impl fmt::Display for Utxo {Utxo55,1317
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {fmt56,1346
pub struct UtxoPool {UtxoPool63,1509
impl UtxoPool {UtxoPool67,1570
    pub fn new(nodes: usize) -> Self {new68,1586
    pub fn node(&self, node: usize) -> &[Utxo] {node77,1806
    pub fn add(&mut self, utxo: Utxo) {add81,1888
    pub fn remove(&mut self, utxo: Utxo) -> bool {remove85,1996
    // pub fn contains(&self, utxo: &Utxo) -> bool {contains92,2229
    // pub fn random(&self) -> Utxo {random96,2340
    pub fn process(&mut self, transaction: &Transaction) -> result::Result<(), InvalidTransaction> {process104,2646
impl fmt::Display for UtxoPool {UtxoPool116,2983
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {fmt117,3016

block.rs,796
const GENESIS_BLOCK_HASH_PREV_BLOCK: &[u8; 32] =GENESIS_BLOCK_HASH_PREV_BLOCK8,163
const GENESIS_BLOCK_HASH_MERKLE_ROOT: &[u8; 32] =GENESIS_BLOCK_HASH_MERKLE_ROOT10,291
pub struct Block {Block13,421
pub struct BlockHeader {BlockHeader19,523
impl Block {Block25,625
    pub fn genesis() -> Self {genesis26,638
    pub fn new(height: usize, hash_prev_block: Hash, transactions: Vec<Transaction>) -> Self {new37,979
    pub fn height(&self) -> usize {height52,1449
    pub fn hash_prev_block(&self) -> Hash {hash_prev_block56,1512
    pub fn hash_merkle_root(&self) -> Hash {hash_merkle_root60,1599
    pub fn transactions(&self) -> &Vec<Transaction> {transactions64,1688
    pub fn hash(&self) -> Hash {hash68,1776
    pub fn serialize(&self) -> Vec<u8> {serialize75,1962
